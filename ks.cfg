# Generated by Anaconda 38.23.4
# Generated by pykickstart v3.47
#version=F38
# Use graphical install
graphical

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8

# Use CDROM installation media
#cdrom
network  --bootproto=dhcp --device=eth0 --ipv6=auto --activate
network  --hostname=fedora

url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-38&arch=x86_64
repo --name=update --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f38&arch=x86_64

%packages
@^server-product-environment


%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.7.1
ignoredisk --only-use=sda
#autopart
# Partition clearing information
clearpart --all --initlabel

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted $y$j9T$o.QsojxhvwP9.4pcZ5GfiLuF$DCaeVpTs5iCWB83bSmsdo2vKHal71ILM9wzvKJJNBl2
user --groups=wheel --name=jcd --password=$y$j9T$x02AFl0QeGKfGcLxIFpbh7hn$JoDt5wSkvXXyq9wmDlzjIxKkFVp8kPwD25xIhaDEIM4 --iscrypted --gecos="jcd"

%post

# Install docker
dnf -y install dnf-plugins-core
dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo

dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# start docker
systemctl start docker

docker pull jcsienko/calc_deploy:latest

docker run -d jcsienko/calc_deploy:latest
%end
